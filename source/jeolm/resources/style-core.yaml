$target$able: off

$style:
- ./main
- ./jeolm
- ./optional

main:
  $style:
  - document class: article
    options: [a4paper,10pt]
    condition: {not: no-document-class}
  - package: fontenc
    options: [T2A]
  - package: inputenc
    options: [utf8]
  - package: babel
    options: [russian]
  - verbatim: '\pagestyle{empty}'
    provide: pagestyle

jeolm:
  $target$able: on

optional:
  $style:
  - delegate: ./geometry
    condition: {not: no-geometry}
  - package: parskip
    condition: {not: no-parskip}
  - delegate: ./pgfpages
    condition: {not: no-pgfpages}
  - delegate: ./shrink-formulas
    condition: shrink-formulas
  $style[print]:
  - .[a5paper,2-on-1,-print]
  $style[tiled4]:
  - .[a6paper,landscape,4-on-1,-tiled4]
  $style[print,tiled4]:
  - .[-print]
  geometry:
    $style:
    - package: geometry
    - ./set-paper-size
    - verbatim: '\geometry{vmargin={2em,2em},hmargin={2em,2em}}'
      provide: geometry:margin
    - verbatim: '\geometry{landscape}'
      provide: geometry:landscape
      condition: landscape
    set-paper-size:
      $style[a6paper]:
      - verbatim: '\geometry{a6paper}'
        provide: geometry:paper
      $style[a5paper]:
      - verbatim: '\geometry{a5paper}'
        provide: geometry:paper
      $style[a4paper]:
      - verbatim: '\geometry{a4paper}'
        provide: geometry:paper
      $style[a3paper]:
      - verbatim: '\geometry{a3paper}'
        provide: geometry:paper
      $style: # default
      - .[a5paper]
  pgfpages:
    $style[-resize-to,-2-on-1,-4-on-1]: []
    $style:
    - package: pgfpages
    - ./uselayout
    uselayout:
      $style[resize-to,-landscape]:
      - verbatim: '\pgfpagesuselayout{resize to}[a4paper]'
        provide: pgfpagesuselayout
      $style[2-on-1,-landscape]:
      - verbatim: '\pgfpagesuselayout{2 on 1}[a4paper,landscape]'
        provide: pgfpagesuselayout
      $style[4-on-1,-landscape]:
      - verbatim: '\pgfpagesuselayout{4 on 1}[a4paper]'
        provide: pgfpagesuselayout
      $style[resize-to,landscape]:
      - verbatim: '\pgfpagesuselayout{resize to}[a4paper,landscape]'
        provide: pgfpagesuselayout
      $style[2-on-1,landscape]:
      - verbatim: '\pgfpagesuselayout{2 on 1}[a4paper]'
        provide: pgfpagesuselayout
      $style[4-on-1,landscape]:
      - verbatim: '\pgfpagesuselayout{4 on 1}[a4paper,landscape]'
        provide: pgfpagesuselayout
      $style: # default
        []
  shrink-formulas:
    $style:
    - verbatim: |-
        \AtBeginDocument{\abovedisplayskip=10pt minus 7pt}
        \AtBeginDocument{\belowdisplayskip=\abovedisplayskip}

